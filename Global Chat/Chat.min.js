javascript:(()=>{if(window.blooketChatLoaded)return;window.blooketChatLoaded=true;const f={apiKey:"AIzaSyBBqdCXK6X_kNn3ybkJDaasRZ7amxVJqc",authDomain:"blooket-chat.firebaseapp.com",databaseURL:"https://blooket-chat-default-rtdb.firebaseio.com",projectId:"blooket-chat",storageBucket:"blooket-chat.firebasestorage.app",messagingSenderId:"1012332349320",appId:"1:1012332349320:web:cf9a2a7632421b1e591c3d"},e={":smile:":"ğŸ˜„",":heart:":"â¤ï¸",":thumbsup:":"ğŸ‘",":star:":"â­",":fire:":"ğŸ”¥"},r=t=>{let n=t;for(const k in e)n=n.split(k).join(e[k]);return n};const s=(u,c)=>{const d=document.createElement("script");d.src=u;d.onload=c;document.head.appendChild(d)};s("https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js",()=>{s("https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js",start)});async function start(){firebase.initializeApp(f);const db=firebase.database();const u=prompt("ğŸ‘‹ Hi! Enter your username:")||"Guest";let c="server1";const servers=["server1","server2","server3"];for(const srv of servers){const snap=await db.ref("rooms/"+srv).once("value");if(!snap.exists()||snap.numChildren()<1){c=srv;break}};const isMobile=/Mobi|Android/i.test(navigator.userAgent);const ui=document.createElement("div");ui.innerHTML=`<div id="hdr">Blooket Chat<br><small>Made by Tony-the-best on GitHub</small><span id="x">âœ•</span></div><div id="msgs"></div><div id="bar"><input id="inp" placeholder="Type a message..." /><button id="send">Send</button></div><div id="emojiBar"></div>`;document.body.appendChild(ui);Object.assign(ui.style,{position:"fixed",bottom:isMobile?"10px":"60px",right:isMobile?"5%":"60px",width:isMobile?"90%":"380px",maxWidth:isMobile?"360px":undefined,height:isMobile?"50%":"550px",display:"flex",flexDirection:"column",zIndex:999999,background:"#fff",border:"3px solid #000",borderRadius:"12px",fontFamily:"Arial,sans-serif"});const st=document.createElement("style");st.textContent="#hdr{background:#2d8cff;color:#fff;padding:8px;font-weight:900;cursor:move;border-top-left-radius:10px;border-top-right-radius:10px;font-size:14px}#hdr small{font-size:10px}#x{float:right;cursor:pointer}#msgs{flex:1;overflow:auto;background:#dbeaff;padding:6px;margin:2px;border-radius:4px;font-size:14px}#bar{display:flex;margin:2px}#inp{flex:1;padding:4px;border-radius:4px;border:1px solid #aaa;font-size:13px}#send{background:#7a3cff;color:#fff;border:0;border-radius:4px;margin-left:4px;padding:4px 8px;cursor:pointer;font-weight:600}#emojiBar{padding:4px 2px;margin:2px;background:#eef;margin-bottom:2px;border-radius:6px;display:flex;flex-wrap:wrap}#emojiBar span{cursor:pointer;margin:2px;font-size:"+ (isMobile?"22px":"18px")+"}";document.head.appendChild(st);const msgs=ui.querySelector("#msgs"),inp=ui.querySelector("#inp"),eb=ui.querySelector("#emojiBar");for(const k in e){const s=document.createElement("span");s.textContent=e[k];s.onclick=()=>{inp.value+=e[k];inp.focus()};eb.appendChild(s)};let drag=false,dx=0,dy=0;ui.querySelector("#hdr").onmousedown=ev=>{drag=true;dx=ev.clientX-ui.offsetLeft;dy=ev.clientY-ui.offsetTop};document.onmousemove=ev=>{if(drag){ui.style.left=ev.clientX-dx+"px";ui.style.top=ev.clientY-dy+"px"}};document.onmouseup=()=>drag=false;ui.querySelector("#x").onclick=()=>ui.remove();const listen=()=>{msgs.innerHTML="";db.ref("rooms/"+c).limitToLast(100).on("child_added",snap=>{const t=snap.val();if(Date.now()-t.time>1800000){snap.ref.remove();return}const n=document.createElement("div");n.innerHTML=`<b>${t.user}</b>: ${r(t.text)}`;msgs.appendChild(n);msgs.scrollTop=msgs.scrollHeight})};listen();const sendMsg=()=>{if(!inp.value)return;db.ref("rooms/"+c).push({user:u,text:inp.value,time:Date.now()});inp.value=""};ui.querySelector("#send").onclick=sendMsg;inp.onkeydown=e=>{if(e.key==="Enter")sendMsg()}})();
