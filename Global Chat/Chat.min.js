javascript:(()=>{if(window.blooketChatLoaded)return;window.blooketChatLoaded=true;const c={apiKey:"AIzaSyBBqdCXK6X_kNn3ybkJDaasRZ7amxVJqc",authDomain:"blooket-chat.firebaseapp.com",databaseURL:"https://blooket-chat-default-rtdb.firebaseio.com",projectId:"blooket-chat",storageBucket:"blooket-chat.firebasestorage.app",messagingSenderId:"1012332349320",appId:"1:1012332349320:web:cf9a2a7632421b1e591c3d"},e={":smile:":"ðŸ˜„",":heart:":"â¤ï¸",":thumbsup:":"ðŸ‘",":star:":"â­",":fire:":"ðŸ”¥"},r=t=>{for(const k in e)t=t.split(k).join(e[k]);return t},l=(s,f)=>{const d=document.createElement("script");d.src=s;d.onload=f;document.head.appendChild(d)};l("https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js",()=>l("https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js",async()=>{if(!firebase.apps.length)firebase.initializeApp(c);const db=firebase.database();const u=prompt("ðŸ‘‹ Hey! Enter your username:")||"Guest";const m=/Mobi|Android/i.test(navigator.userAgent);const sv=["server1","server2","server3"];let rm=sv[0];for(const s of sv){const n=await db.ref("rooms/"+s).once("value");if(!n.exists()||Object.values(n.val()).every(v=>Date.now()-v.time>1800000)){rm=s;break}}const ui=document.createElement("div");ui.innerHTML=`<div id=h>Blooket Chat<br><small>Made by Tony-the-best on GitHub</small><span id=x>âœ•</span></div><div id=m></div><div id=e></div><div id=b><input id=i placeholder="Type a message..."><button id=s>Send</button></div>`;document.body.appendChild(ui);Object.assign(ui.style,{position:"fixed",bottom:m?"10px":"60px",right:m?"5%":"60px",width:m?"90%":"380px",height:m?"50%":"550px",display:"flex",flexDirection:"column",zIndex:999999,background:"#fff",border:"3px solid #000",borderRadius:"12px",fontFamily:"Arial"});const st=document.createElement("style");st.textContent=`#h{background:#2d8cff;color:#fff;padding:8px;font-weight:900;cursor:move}#h small{font-size:10px}#x{float:right;cursor:pointer}#m{flex:1;overflow:auto;background:#dbeaff;padding:6px;margin:4px;border-radius:6px}#b{display:flex;margin:4px}#i{flex:1;padding:6px;border-radius:6px;border:1px solid #aaa}#s{background:#7a3cff;color:#fff;border:0;border-radius:6px;margin-left:4px;padding:6px 10px;font-weight:700}#e{padding:4px;margin:4px;background:#eef;border-radius:6px}#e span{cursor:pointer;font-size:${m?"22px":"18px"};margin:3px}`;document.head.appendChild(st);const msgs=ui.querySelector("#m"),inp=ui.querySelector("#i"),eb=ui.querySelector("#e");for(const k in e){const sp=document.createElement("span");sp.textContent=e[k];sp.onclick=()=>inp.value+=e[k];eb.appendChild(sp)}let d=false,ox=0,oy=0;const sd=a=>{d=true;const t=a.touches?a.touches[0]:a;ox=t.clientX-ui.offsetLeft;oy=t.clientY-ui.offsetTop};const mv=a=>{if(!d)return;const t=a.touches?a.touches[0]:a;ui.style.left=t.clientX-ox+"px";ui.style.top=t.clientY-oy+"px"};ui.querySelector("#h").addEventListener("mousedown",sd);ui.querySelector("#h").addEventListener("touchstart",sd);document.addEventListener("mousemove",mv);document.addEventListener("touchmove",mv);document.addEventListener("mouseup",()=>d=false);document.addEventListener("touchend",()=>d=false);ui.querySelector("#x").onclick=()=>ui.remove();db.ref("rooms/"+rm).limitToLast(100).on("child_added",sn=>{const v=sn.val();if(Date.now()-v.time>1800000){sn.ref.remove();return}const d=document.createElement("div");d.innerHTML=`<b>${v.user}</b>: ${r(v.text)}`;msgs.appendChild(d);msgs.scrollTop=msgs.scrollHeight});const send=()=>{if(!inp.value.trim())return;db.ref("rooms/"+rm).push({user:u,text:inp.value,time:Date.now()});inp.value=""};ui.querySelector("#s").onclick=send;inp.onkeydown=a=>a.key==="Enter"&&send()}))})();
