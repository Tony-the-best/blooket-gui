javascript:(function(){console.log('big token hack starting...');var keys=['user','blooketUser','player','account'],user=null,k=null;for(var i=0;i<keys.length;i++){var d=localStorage.getItem(keys[i]);if(d){try{var p=JSON.parse(d);if(p.tokens||p.balance){user=p;k=keys[i];console.log('found in '+k);break;}}catch(e){}}}if(!user){user=JSON.parse(localStorage.getItem('user')||'{}');k='user';}var old=parseInt(user.tokens)||0;var inp=prompt('tokens to add? ('+old.toLocaleString()+')\nstorage: '+k,'999999');if(!inp||!(!isNaN(inp))){return;}var add=parseInt(inp);if(add<1||add>500000000){alert('too crazy');return;}user.tokens=old+add;if(user.balance)user.balance.tokens=user.tokens;localStorage.setItem(k,JSON.stringify(user));localStorage.setItem('user',JSON.stringify(user));localStorage.setItem('__backup_'+Date.now(),JSON.stringify(user));var total=user.tokens;var orig=window.fetch;window.fetch=function(){return orig.apply(this,arguments).then(function(r){var u=arguments[0];if(typeof u==='string'&&u.toLowerCase().includes('blooket.com')&&u.includes('/api/')){return r.clone().then(function(c){return c.json().then(function(d){if(d.tokens)d.tokens=total;if(d.balance)d.balance.tokens=total;return new Response(JSON.stringify(d),{status:r.status})})})}});};if(window.XMLHttpRequest){var oopen=XMLHttpRequest.prototype.open;oopen=function(m,u){this._bl=u&&u.includes('blooket.com')&&u.includes('/api/');return oopen.apply(this,arguments);};var osend=XMLHttpRequest.prototype.send;osend=function(){var x=this; var ol=x.onload;x.onload=function(){if(x._bl){try{var d=JSON.parse(x.responseText);if(d.tokens)d.tokens=total;Object.defineProperty(x,'responseText',{value:JSON.stringify(d)});}catch(e){}}if(ol)ol.call(x);};return osend.apply(this,arguments);};}var sels=['[data-balance]','[data-tokens]','.balance','.tokens','[class*="balance"]','[class*="token"]'];var cnt=0;sels.forEach(function(sl){document.querySelectorAll(sl).forEach(function(e){e.textContent=total.toLocaleString();cnt++});});new MutationObserver(function(m){m.forEach(function(c){c.addedNodes.forEach(function(n){if(n.nodeType===1){n.querySelectorAll('[class*="balance"],[class*="token"]').forEach(function(e){e.textContent=total.toLocaleString()});}});});}).observe(document.body,{childList:true,subtree:true});console.log('added',add.toLocaleString(),'new total',total.toLocaleString(),'fixed',cnt);alert('DONE!\n\n+'+add.toLocaleString()+'\nTotal: '+total.toLocaleString()+'\nFixed: '+cnt+' screen spots\nAPI hooked\nRefresh safe');})();
